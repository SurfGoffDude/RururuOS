# RururuOS PREEMPT_RT Kernel Configuration
# Apply these options when building custom kernel

# ===================
# PREEMPT_RT Core
# ===================

# Enable full preemption (RT)
CONFIG_PREEMPT_RT=y

# High resolution timers (required for RT)
CONFIG_HIGH_RES_TIMERS=y

# No HZ when idle (power saving + latency)
CONFIG_NO_HZ_IDLE=y
CONFIG_NO_HZ_FULL=y

# Timer frequency - 1000 Hz for low latency
CONFIG_HZ_1000=y
CONFIG_HZ=1000

# ===================
# CPU Scheduling
# ===================

# Deadline scheduler support
CONFIG_SCHED_DEADLINE=y

# CPU isolation support
CONFIG_CPU_ISOLATION=y

# ===================
# IRQ Threading
# ===================

# Force threaded IRQ handlers
CONFIG_IRQ_FORCED_THREADING=y
CONFIG_IRQ_FORCED_THREADING_DEFAULT=y

# ===================
# Memory
# ===================

# Transparent hugepages (can cause latency spikes in RT)
# CONFIG_TRANSPARENT_HUGEPAGE is not set

# Memory compaction (disable for RT)
# CONFIG_COMPACTION is not set

# ===================
# Debugging (disable for production)
# ===================

# Disable debug features that add latency
# CONFIG_DEBUG_PREEMPT is not set
# CONFIG_PROVE_LOCKING is not set
# CONFIG_LOCKDEP is not set
# CONFIG_DEBUG_LOCK_ALLOC is not set

# ===================
# Latency Measurement
# ===================

# Enable ftrace for latency analysis
CONFIG_FTRACE=y
CONFIG_FUNCTION_TRACER=y
CONFIG_SCHED_TRACER=y
CONFIG_IRQSOFF_TRACER=y
CONFIG_PREEMPTIRQ_TRACEPOINTS=y

# ===================
# Power Management
# ===================

# Disable deep C-states (they add wake latency)
CONFIG_CPU_IDLE_GOV_LADDER=y
# CONFIG_CPU_IDLE_GOV_MENU is not set

# ===================
# Audio Specific
# ===================

# ALSA sequencer
CONFIG_SND_SEQUENCER=y
CONFIG_SND_SEQ_DUMMY=y

# High resolution timer for ALSA
CONFIG_SND_HRTIMER=y

# ===================
# GPU
# ===================

# NVIDIA support
CONFIG_DRM=y
CONFIG_DRM_NOUVEAU=m

# AMD support
CONFIG_DRM_AMDGPU=m
CONFIG_DRM_AMD_DC=y

# Intel support
CONFIG_DRM_I915=m
